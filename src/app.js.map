{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/util/data-provider.js","webpack:///external \"pouchdb-adapter-leveldb\"","webpack:///external \"pouchdb-core\"","webpack:///external \"electron\"","webpack:///external \"babel-runtime/core-js/promise\"","webpack:///external \"pouchdb-quick-search\"","webpack:///./src/util/DbUtil.js","webpack:///external \"url\"","webpack:///external \"path\"","webpack:///external \"babel-runtime/helpers/defineProperty\"","webpack:///./src/main.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","r","value","n","__esModule","object","property","prototype","hasOwnProperty","p","w","s","targetDb","referenceDb","lookupsDb","PouchDB","plugin","require","destroyDbs","destroy","then","response","console","log","close","catch","err","refDb","__dirname","setupTargetDb","_promise2","default","resolve","reject","doc","bibleJson","bulkDocs","setupRefDb","refEnUlbJson","refEnUdbJson","refHiUlbJson","refArbVdtJson","chunksJson","refsConfigJson","put","setupLookupsDb","lookupsDB","langCodeJson","electron","session","app","BrowserWindow","win","createWindow","_ref","icon","width","height","_defineProperty3","setMenu","loadURL","_url2","format","pathname","_path2","join","protocol","slashes","once","maximize","show","on","process","platform","quit","dbSetup","dbUtil"],"mappings":"aACA,IAAAA,KAMA,SAAAC,EAAAC,GAGA,GAAAF,EAAAE,GACA,OAAAF,EAAAE,GAAAC,QAGA,IAAAC,EAAAJ,EAAAE,IACAG,EAAAH,EACAI,GAAA,EACAH,YAUA,OANAI,EAAAL,GAAAM,KAAAJ,EAAAD,QAAAC,IAAAD,QAAAF,GAGAG,EAAAE,GAAA,EAGAF,EAAAD,QAKAF,EAAAQ,EAAAF,EAGAN,EAAAS,EAAAV,EAGAC,EAAAU,EAAA,SAAAR,EAAAS,EAAAC,GACAZ,EAAAa,EAAAX,EAAAS,IACAG,OAAAC,eAAAb,EAAAS,GACAK,cAAA,EACAC,YAAA,EACAC,IAAAN,KAMAZ,EAAAmB,EAAA,SAAAjB,GACAY,OAAAC,eAAAb,EAAA,cAAiDkB,OAAA,KAIjDpB,EAAAqB,EAAA,SAAAlB,GACA,IAAAS,EAAAT,KAAAmB,WACA,WAA2B,OAAAnB,EAAA,SAC3B,WAAiC,OAAAA,GAEjC,OADAH,EAAAU,EAAAE,EAAA,IAAAA,GACAA,GAIAZ,EAAAa,EAAA,SAAAU,EAAAC,GAAsD,OAAAV,OAAAW,UAAAC,eAAAnB,KAAAgB,EAAAC,IAGtDxB,EAAA2B,EAAA,GAGA3B,EAAA4B,KAIA5B,IAAA6B,EAAA,mCCzEA,IAAIC,EACAC,EAEAC,EAEJ7B,EAAOD,SACH4B,SAAU,WACb,QAAuB,IAAbA,EAA0B,CAChC,IAAIG,EAAUjC,EAAQ,GAClBkC,OAAOlC,EAAQ,IACnB8B,EAAW,IAAIG,EAAQ,eAE3B,OAAOH,GAEJC,YAAa,WAChB,QAA0B,IAAhBA,EAA6B,CACnC,IAAIE,EAAUjC,EAAQ,GAClBkC,OAAOlC,EAAQ,IACrBkC,OAAOlC,EAAQ,KACb+B,EAAc,IAAIE,EAAQ,kBAE9B,OAAOF,GAEJC,UAAW,WACd,QAAwB,IAAdA,EAA2B,CACjC,IAAIC,EAAUjC,EAAQ,GAClBkC,OAAOlC,EAAQ,IACnBgC,EAAY,IAAIC,EAAQ,gBAE5B,OAAOD,mBC7BR7B,EAAAD,QAAAiC,QAAA,0CCAAhC,EAAAD,QAAAiC,QAAA,+BCAAhC,EAAAD,QAAAiC,QAAA,2BCAAhC,EAAAD,QAAAiC,QAAA,so76pBCAAhC,EAAAD,QAAAiC,QAAA,uGCAAhC,EAAOD,SACHkC,WAAY,WACf,IAAMN,EAAW9B,EAAW,GAA2B8B,WACvDA,EAASO,UAAUC,KAAK,SAAUC,GAC9BC,QAAQC,IAAI,wBACZX,EAASY,UACVC,MAAM,SAAUC,GACfJ,QAAQC,IAAIG,GACZd,EAASY,UAGb,IAAMG,EAAQ,IAAIZ,QAAWa,UAAf,mBACdD,EAAMR,UAAUC,KAAK,SAAUC,GAC3BC,QAAQC,IAAI,0BACZI,EAAMH,UACPC,MAAM,SAAUC,GACfJ,QAAQC,IAAIG,GACZC,EAAMH,WAIPK,cAAe,IAAAC,EAAAC,QAClB,SAASC,EAASC,GACd,IAAMrB,EAAW9B,EAAW,GAA2B8B,WACvDA,EAASZ,IAAI,aACfoB,KAAK,SAAUc,GACZtB,EAASY,QACTQ,EAAQ,sBAEXP,MAAM,SAAUC,GACb,IAAMS,EAAYrD,EAAW,IAC7B8B,EAASwB,SAASD,GACpBf,KAAK,SAAUC,GACZT,EAASY,QACTQ,EAAQ,mCAEXP,MAAM,SAAUC,GACbd,EAASY,QACTS,EAAOP,SAKVW,WAAY,IAAAP,EAAAC,QACf,SAASC,EAASC,GACd,IAAMN,EAAQ7C,EAAW,GAA2B+B,cACpDc,EAAM3B,IAAI,QACZoB,KAAK,SAAUc,GACZP,EAAMH,QACNQ,EAAQ,yBAEXP,MAAM,SAAUC,GACb,IAAMY,EAAexD,EAAW,IACjCyD,EAAezD,EAAW,IAC1B0D,EAAe1D,EAAW,GAC1B2D,EAAgB3D,EAAW,GAC3B4D,EAAa5D,EAAW,GACxB6D,EAAiB7D,EAAW,GAE3B6C,EAAMiB,IAAIF,GACZtB,KAAK,SAAUC,GACZ,OAAOM,EAAMS,SAASO,KAEzBvB,KAAK,SAAUC,GACZ,OAAOM,EAAMS,SAASE,KAEzBlB,KAAK,SAAUC,GACZ,OAAOM,EAAMS,SAASG,KAEzBnB,KAAK,SAAUC,GACZ,OAAOM,EAAMS,SAASI,KAEzBpB,KAAK,SAAUC,GACZ,OAAOM,EAAMS,SAASK,KAEzBrB,KAAK,SAAUC,GACZM,EAAMH,QACNQ,EAAQ,0CAEXP,MAAM,SAAUC,GACbC,EAAMH,QACNS,EAAO,gCAAkCP,SAI/CmB,eAAgB,IAAAf,EAAAC,QAChB,SAASC,EAASC,GACd,IAAMa,EAAYhE,EAAW,GAA2BgC,YACxDgC,EAAU9C,IAAI,eAChBoB,KAAK,SAAUc,GACZY,EAAUtB,QACVQ,EAAQ,uBAEXP,MAAM,SAAUC,GACb,IAAMqB,EAAejE,EAAW,GAChCgE,EAAUV,SAASW,GACrB3B,KAAK,SAAUC,GACZyB,EAAUtB,QACVQ,EAAQ,qCAEXP,MAAM,SAAUC,GACboB,EAAUtB,QACVS,EAAOP,oICtGdzC,EAAAD,QAAAiC,QAAA,sBCAAhC,EAAAD,QAAAiC,QAAA,uBCAAhC,EAAAD,QAAAiC,QAAA,mGCOAnC,EAAA,SACAA,EAAA,OACAA,EAAA,wDATA,IAAMkE,EAAWlE,EAAQ,GACnBmE,EAAUnE,EAAQ,GAAYmE,QAG7BC,EAAOF,EAAPE,IAEAC,EAAiBH,EAAjBG,cAQHC,SAEJ,SAASC,IAAe,IAAAC,GAEpBF,EAAM,IAAID,GAAJG,GACNC,KAAK,0BACLC,MAAO,IACPC,OAAQ,MAHF,EAAAC,EAAA3B,SAAAuB,EAAA,SAIG,MAJH,EAAAI,EAAA3B,SAAAuB,EAKN,YAAa,MALP,EAAAI,EAAA3B,SAAAuB,EAMN,aAAc,MANR,EAAAI,EAAA3B,SAAAuB,EAON,sBAAsB,IAPhB,EAAAI,EAAA3B,SAAAuB,EAQN,kBAAmB,WARb,EAAAI,EAAA3B,SAAAuB,EASN,kBAAmBL,QAAWA,KATxB,EAAAS,EAAA3B,SAAAuB,EAAA,QAUA,GAVAA,KAgBFK,QAAQ,MAKZP,EAAIQ,QACCC,EAAA9B,QAAI+B,QACPC,SAAUC,EAAAjC,QAAKkC,KAAKrC,UAAW,qBAC/BsC,SAAU,QACVC,SAAS,KAKXf,EAAIgB,KAAK,gBAAiB,WAG7BhB,EAAIiB,WACGjB,EAAIkB,SAIRlB,EAAImB,GAAG,SAAU,WAIpBnB,EAAM,KACmB,WAArBoB,QAAQC,UACRvB,EAAIwB,SAKT,IAAIC,EAAU,IAAA7C,EAAAC,QACV,SAAUC,EAASC,GAEtB,IAAI2C,EAAS9F,EAAW,IACxB8F,EAAO/C,cACFT,KAAK,SAACC,GAEV,OADAC,QAAQC,IAAIF,GACLuD,EAAOvC,aAEVjB,KAAK,SAACC,GAEJ,OADNC,QAAQC,IAAIF,GACCuD,EAAO/B,iBAEbzB,KAAK,SAACC,GACHC,QAAQC,IAAIF,GACZW,EAAQX,KAEXI,MAAM,SAACC,GACdJ,QAAQC,IAAI,yBAA2BG,GACvCO,EAAOP,OAoBTwB,EAAIqB,GAAG,QAhBP,WACII,EACFvD,KAAK,SAACC,GACHgC,MAEH5B,MAAM,SAACC,GACJJ,QAAQC,IAAI,iCAAmCG,OAcpDwB,EAAIqB,GAAG,oBAAqB,WAGC,WAArBC,QAAQC,UACZvB,EAAIwB,SAIRxB,EAAIqB,GAAG,WAAY,WAGH,OAARnB,GACJC","file":"app.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading wasm modules\n \tvar installedWasmModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// object with all compiled WebAssembly.Modules\n \t__webpack_require__.w = {};\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 19);\n","var targetDb,\r\n    referenceDb,\r\n    referenceDbSearch,\r\n    lookupsDb;\r\n\r\nmodule.exports = {\r\n    targetDb: function() {\r\n\tif(typeof targetDb === 'undefined') {\r\n\t    var PouchDB = require('pouchdb-core')\r\n\t      \t.plugin(require('pouchdb-adapter-leveldb'));\r\n\t    targetDb = new PouchDB(\"db/targetDB\");\r\n\t}\r\n\treturn targetDb;\r\n    },\r\n    referenceDb: function() {\r\n\tif(typeof referenceDb === 'undefined') {\r\n\t    var PouchDB = require('pouchdb-core')\r\n\t      \t.plugin(require('pouchdb-adapter-leveldb'))\r\n\t\t.plugin(require('pouchdb-quick-search'));\r\n\t    referenceDb = new PouchDB(\"db/referenceDB\");\r\n\t}\r\n\treturn referenceDb;\r\n    },\r\n    lookupsDb: function() {\r\n\tif(typeof lookupsDb === 'undefined') {\r\n\t    var PouchDB = require('pouchdb-core')\r\n\t      \t.plugin(require('pouchdb-adapter-leveldb'));\r\n\t    lookupsDb = new PouchDB(\"db/lookupsDB\");\r\n\t}\r\n\treturn lookupsDb;\r\n\t}\r\n\r\n}\r\n","module.exports = require(\"pouchdb-adapter-leveldb\");","module.exports = require(\"pouchdb-core\");","module.exports = require(\"electron\");","module.exports = require(\"babel-runtime/core-js/promise\");","module.exports = require(\"pouchdb-quick-search\");","module.exports = {\r\n    destroyDbs: function() {\r\n\tconst targetDb = require(`${__dirname}/data-provider`).targetDb();\r\n\ttargetDb.destroy().then(function (response) {\r\n\t    console.log('targetDB destroyed!.');\r\n\t    targetDb.close();\r\n\t}).catch(function (err) {\r\n\t    console.log(err);\r\n\t    targetDb.close();\r\n\t});\r\n\r\n\tconst refDb = new PouchDB(`${__dirname}/db/referenceDB`);\r\n\trefDb.destroy().then(function (response) {\r\n\t    console.log('referenceDB destroyed!');\r\n\t    refDb.close();\r\n\t}).catch(function (err) {\r\n\t    console.log(err);\r\n\t    refDb.close();\r\n\t});\r\n    },\r\n\r\n    setupTargetDb: new Promise(\r\n\tfunction(resolve, reject) {\r\n\t    const targetDb = require(`${__dirname}/data-provider`).targetDb();\r\n\t    targetDb.get('isDBSetup')\r\n\t\t.then(function (doc) {\r\n\t\t    targetDb.close();\r\n\t\t    resolve('TargetDB exists.');\r\n\t\t})\r\n\t\t.catch(function (err) {\r\n\t\t    const bibleJson = require(`${__dirname}/../lib/full_bible_skel.json`);\r\n\t\t    targetDb.bulkDocs(bibleJson)\r\n\t\t\t.then(function (response) {\r\n\t\t\t    targetDb.close();\r\n\t\t\t    resolve('Successfully setup Target DB.');\r\n\t\t\t})\r\n\t\t\t.catch(function (err) {\r\n\t\t\t    targetDb.close();\r\n\t\t\t    reject(err);\r\n\t\t\t});\r\n\t\t});\r\n\t}),\r\n    \r\n    setupRefDb: new Promise (\r\n\tfunction(resolve, reject) {\r\n\t    const refDb = require(`${__dirname}/data-provider`).referenceDb();\r\n\t    refDb.get('refs')\r\n\t\t.then(function (doc) {\r\n\t\t    refDb.close();\r\n\t\t    resolve('ReferenceDB exists.');\r\n\t\t})\r\n\t\t.catch(function (err) {\r\n\t\t    const refEnUlbJson = require(`${__dirname}/../lib/eng_ulb.json`),\r\n\t\t\t  refEnUdbJson = require(`${__dirname}/../lib/eng_udb.json`),\r\n\t\t\t  refHiUlbJson = require(`${__dirname}/../lib/hin_ulb.json`),\r\n\t\t\t  refArbVdtJson = require(`${__dirname}/../lib/arb_vdt.json`),\r\n\t\t\t  chunksJson = require(`${__dirname}/../lib/chunks.json`),\r\n\t\t\t  refsConfigJson = require(`${__dirname}/../lib/refs_config.json`);\r\n\r\n\t\t    refDb.put(chunksJson)\t\r\n\t\t\t.then(function (response) {\r\n\t\t\t    return refDb.bulkDocs(refsConfigJson);\r\n\t\t\t})\r\n\t\t\t.then(function (response) {\r\n\t\t\t    return refDb.bulkDocs(refEnUlbJson);\r\n\t\t\t})\r\n\t\t\t.then(function (response) {\r\n\t\t\t    return refDb.bulkDocs(refEnUdbJson);\r\n\t\t\t})\r\n\t\t\t.then(function (response) {\r\n\t\t\t    return refDb.bulkDocs(refHiUlbJson);\r\n\t\t\t})\r\n\t\t\t.then(function (response) {\r\n\t\t\t    return refDb.bulkDocs(refArbVdtJson);\r\n\t\t\t})\r\n\t\t\t.then(function (response) {\r\n\t\t\t    refDb.close();\r\n\t\t\t    resolve('Successfully loaded reference texts.');\r\n\t\t\t})\r\n\t\t\t.catch(function (err) {\r\n\t\t\t    refDb.close();\r\n\t\t\t    reject('Error loading reference data.' + err);\r\n\t\t\t});\r\n\t\t});\r\n\t}),\r\n\tsetupLookupsDb: new Promise(\r\n\tfunction(resolve, reject) {\r\n\t    const lookupsDB = require(`${__dirname}/data-provider`).lookupsDb();\r\n\t    lookupsDB.get('english_eng')\r\n\t\t.then(function (doc) {\r\n\t\t    lookupsDB.close();\r\n\t\t    resolve('LookupsDB exists.');\r\n\t\t})\r\n\t\t.catch(function (err) {\r\n\t\t    const langCodeJson = require(`${__dirname}/../lib/language_code.json`);\r\n\t\t    lookupsDB.bulkDocs(langCodeJson)\r\n\t\t\t.then(function (response) {\r\n\t\t\t    lookupsDB.close();\r\n\t\t\t    resolve('Successfully setup Looks up DB.');\r\n\t\t\t})\r\n\t\t\t.catch(function (err) {\r\n\t\t\t    lookupsDB.close();\r\n\t\t\t    reject(err);\r\n\t\t\t});\r\n\t\t});\r\n\t})\r\n};\r\n","module.exports = require(\"url\");","module.exports = require(\"path\");","module.exports = require(\"babel-runtime/helpers/defineProperty\");","const electron = require('electron');\r\nconst session = require('electron').session;\r\n\r\n// Module to control application life.\r\nconst {app} = electron\r\n// Module to create native browser window.\r\nconst {BrowserWindow} = electron;\r\nimport path from \"path\";\r\nimport url from \"url\";\r\nimport env from \"env\";\r\n\r\n\r\n// Keep a global reference of the window object, if you don't, the window will\r\n// be closed automatically when the JavaScript object is garbage collected.\r\nlet win;\r\n\r\nfunction createWindow() {\r\n    // Create the browser window.\r\n    win = new BrowserWindow({\r\n    icon:'/assets/images/logo.png',\r\n    width: 800,\r\n    height: 600,\r\n     height: 600,\r\n    'min-width': 600,\r\n    'min-height': 300,\r\n    'accept-first-mouse': true,\r\n    'title-bar-style': 'hidden',\r\n    'webPreferences': {'session': session},\r\n    show: false\r\n    });\r\n    // win.openDevTools();\r\n    \r\n    // and load the index.html of the app.\r\n    // win.loadURL(`file:${__dirname}/views/index.html`);\r\n    win.setMenu(null);\r\n    // win.loadURL(url.format({\r\n    // protocol: 'file:',\r\n    // pathname: path.join(__dirname, '/views/index.html'),\r\n    // slashes:  true}))\r\n    win.loadURL(\r\n         url.format({\r\n      pathname: path.join(__dirname, \"/views/index.html\"),\r\n      protocol: \"file:\",\r\n      slashes: true\r\n    })\r\n    )\r\n\r\n    //loading window gracefully\r\n    win.once('ready-to-show', () => {\r\n\t// Open the DevTools.\r\n\t// win.webContents.openDevTools();\t\r\n\twin.maximize();\r\n        win.show();\r\n    });\r\n\r\n    // Emitted when the window is closed.\r\n    win.on('closed', () => {\r\n    // Dereference the window object, usually you would store windows\r\n    // in an array if your app supports multi windows, this is the time\r\n    // when you should delete the corresponding element.\r\n\twin = null;\r\n\tif (process.platform !== 'darwin') {\r\n\t    app.quit();\r\n\t}\r\n    });\r\n}\r\n\r\nvar dbSetup = new Promise(\r\n    function (resolve, reject) {\r\n\t// Setup database.\r\n\tvar dbUtil = require(`${__dirname}/util/DbUtil.js`);\r\n\tdbUtil.setupTargetDb\r\n\t    .then((response) => {\r\n\t\tconsole.log(response);\r\n\t\treturn dbUtil.setupRefDb;\r\n\t    })\r\n\t    .then((response) => {\r\n\t\tconsole.log(response);\r\n        return dbUtil.setupLookupsDb;\r\n\t    })\r\n        .then((response)=>{\r\n            console.log(response)\r\n            resolve(response)\r\n        })\r\n        .catch((err) => {\r\n\t\tconsole.log('Error while DB setup. ' + err);\r\n\t\treject(err);\r\n\t    });\r\n    });\r\n\r\nfunction preProcess() {\r\n    dbSetup\r\n\t.then((response) => {\r\n\t    createWindow();\r\n\t})\r\n\t.catch((err) => {\r\n\t    console.log('Error while App intialization.' + err);\r\n\t});\r\n}\r\n\r\n// if (env.name === \"development\") {\r\n//     win.openDevTools();\r\n//   }\r\n// This method will be called when Electron has finished\r\n// initialization and is ready to create browser windows.\r\n// Some APIs can only be used after this event occurs.\r\napp.on('ready', preProcess);\r\n\r\n\r\n// Quit when all windows are closed.\r\napp.on('window-all-closed', () => {\r\n    // On OS X it is common for applications and their menu bar\r\n    // to stay active until the user quits explicitly with Cmd + Q\r\n    if (process.platform !== 'darwin') {\r\n    app.quit();\r\n    }\r\n});\r\n\r\napp.on('activate', () => {\r\n    // On OS X it's common to re-create a window in the app when the\r\n    // dock icon is clicked and there are no other windows open.\r\n    if (win === null) {\r\n    createWindow();\r\n    }\r\n    // win.openDevTools();\r\n    \r\n});\r\n\r\n"],"sourceRoot":""}